# Inverted Index Practice

## 作業要求

請使用下列資料及建立反向索引
```cmd
pip install gdown
gdown --id 1rQnbaOiqoN40AzHVq_IrRW4ki-rFPRxZ
```
該資料集中包含隨機抽取之50000筆維基百科條目的[JSON檔](./wiki_2021_10_05_50000.json)

**目標**：根據給定一字詞W，回傳包含字詞 W 的所有文章 id

**範例輸出**：
```
人心惶惶 ['13958', '21027', '27575', '34876', '37680', '38208', '38754', '45590', '47095', '49915']
縱火犯 ['13958', '37537']
印尼羽毛球 ['13960', '13974', '17725', '18516', '21413', '26119']
生長激素 ['13961', '27962']
胰高血糖素 ['13961', '19650', '21408']
```

## 解法步驟(斷詞法)

1. 使用中研院開發的 ckiptagger 做斷詞 *01-generate-inverted-table.py*
2. 不做反向索引，直接改建立 sqlite 資料庫 
3. 利用 SQL 技巧取得文章 ID

+ 優點：抓到的文章相當 precision 很高
+ 缺點：可能因標點的關係導致結果會有漏抓的情況發生，因此有修正方案來降低標點的影響：*01-generate-inverted-table-v2.py*

## 超級爆力法

1. 直接將 json 檔轉成 sqlite 資料庫 *02-convert-json-to-sqlite.py*
2. 利用 SQL 抓取

+ 優點：速度意外地還滿快的 recall rate 很高
+ 缺點：會有多抓的情形發生

## 混用

將斷詞法與超級爆力法之交集視為答案，而聯集減去交集則透過工人智慧判斷。*03-semi-human-getter.py*

## 實際場景

測試當日老師會給有10分鐘20筆測資，混用法雖然精準但也相對花時間，要注意時間分配，另外有時會有工人也難以判斷的場景，比如「葛萊美」該關鍵字是否也要抓「葛萊美獎」？